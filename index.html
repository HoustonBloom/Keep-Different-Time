<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KEEP DIFFERENT TIME — A Lunar Calendar for Chosen Family</title>
<meta name="description" content="A shared lunar calendar that organizes life around the moon instead of the market. Solar feasts, lunar sabbaths, and blue moon festivals for found family.">
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Oswald:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,900;1,400&family=VT323&family=Courier+Prime:ital,wght@0,400;0,700;1,400&family=DM+Serif+Display:ital@0;1&family=Syne:wght@400;700;800&family=IBM+Plex+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
<style>
  :root {
    /* darks */
    --void: #060a12;
    --deep: #0c1220;
    --night: #121d30;
    --ocean: #152238;
    --slate: #475569;

    /* lights */
    --silver: #cbd5e1;
    --ice: #e2e8f0;
    --frost: #f1f5f9;
    --cold-white: #f8fafc;

    /* blues */
    --blue-deep: #1e3a5f;
    --blue-mid: #2563eb;
    --blue-bright: #60a5fa;
    --blue-pale: #93c5fd;
    --blue-wash: rgba(37, 99, 235, 0.08);

    /* purples */
    --purple-deep: #2e1065;
    --purple-vivid: #7c3aed;
    --purple-bright: #a78bfa;
    --purple-light: #c4b5fd;
    --purple-glow: #ddd6fe;
    --purple-wash: rgba(124, 58, 237, 0.06);

    --focus-ring: #a78bfa;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }
  ::selection { background: var(--purple-vivid); color: white; }

  /* ========== A11Y FOUNDATIONS ========== */
  *:focus { outline: none; }
  *:focus-visible {
    outline: 3px solid var(--focus-ring);
    outline-offset: 3px;
  }

  .skip-link {
    position: absolute;
    top: -100px;
    left: 1rem;
    background: var(--purple-vivid);
    color: white;
    padding: 0.75rem 1.5rem;
    font-family: 'Space Mono', monospace;
    font-size: 0.85rem;
    text-decoration: none;
    z-index: 9999;
    transition: top 0.2s ease;
  }

  .skip-link:focus { top: 0; outline: 3px solid white; outline-offset: 2px; }

  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
    .feast-card, .moon-card { transform: none !important; }
    .hero-sub { transform: none !important; }
  }

  .sr-only {
    position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
    overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0;
  }

  body {
    background: var(--cold-white);
    color: var(--deep);
    font-family: 'Space Mono', monospace;
    overflow-x: hidden;
    line-height: 1.6;
  }

  /* grain */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.025'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 9999;
  }

  /* ========== SIDE NAV ========== */
  .side-nav {
    position: fixed;
    left: 0; top: 0;
    height: 100vh;
    width: 56px;
    background: var(--void);
    z-index: 100;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    border-right: 1px solid var(--night);
    padding-top: 56px;
    padding-bottom: 56px;
  }

  .side-nav a {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    color: var(--silver);
    text-decoration: none;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    padding: 1rem 0.5rem;
    transition: all 0.15s ease;
    font-family: 'IBM Plex Mono', monospace;
    opacity: 0.4;
    border-left: 2px solid transparent;
  }

  .side-nav a:hover,
  .side-nav a.active {
    opacity: 1;
    background: var(--night);
    border-left-color: var(--purple-bright);
    color: var(--frost);
  }

  .side-nav a:focus-visible {
    outline: 2px solid var(--purple-bright);
    outline-offset: -2px;
  }

  .side-nav a.nav-moon {
    font-size: 1.6rem;
    writing-mode: horizontal-tb;
    padding: 0.85rem 0;
    opacity: 1;
    color: var(--purple-light);
    text-decoration: none;
    border-left: 2px solid transparent;
    letter-spacing: 0;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 56px;
    text-shadow:
      0 0 8px rgba(167,139,250,0.4),
      0 0 16px rgba(167,139,250,0.2);
    transition: all 0.3s ease;
  }

  .side-nav a.nav-moon:hover {
    background: transparent;
    opacity: 1;
    color: var(--purple-bright);
    border-left-color: transparent;
    transform: scale(1.15);
    text-shadow:
      0 0 12px rgba(167,139,250,0.6),
      0 0 24px rgba(167,139,250,0.3);
  }

  main { margin-left: 56px; }

  /* ========== HERO ========== */
  .hero {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 3rem 3rem 3rem 4rem;
    position: relative;
    overflow: hidden;
    border-bottom: 1px solid var(--ice);
    background:
      radial-gradient(ellipse at 85% 15%, rgba(124,58,237,0.05) 0%, transparent 45%),
      radial-gradient(ellipse at 15% 85%, rgba(37,99,235,0.04) 0%, transparent 40%),
      var(--cold-white);
  }

  .hero-bg-text {
    position: absolute;
    font-family: 'Oswald', sans-serif;
    font-size: 20vw;
    font-weight: 700;
    color: var(--purple-vivid);
    opacity: 0.02;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    white-space: nowrap;
    pointer-events: none;
    text-transform: uppercase;
  }

  .hero-stamp {
    position: fixed;
    top: 1.5rem;
    right: 3rem;
    border: 4px solid var(--purple-vivid);
    padding: 0.8rem 1.6rem;
    font-family: 'VT323', monospace;
    font-size: 1.4rem;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: var(--purple-vivid);
    transform: rotate(2.5deg);
    background: rgba(248, 250, 252, 0.92);
    backdrop-filter: blur(6px);
    z-index: 99;
  }

  .hero-moon-img {
    position: absolute;
    top: 50%;
    right: -2rem;
    transform: translateY(-50%) rotate(0deg);
    width: clamp(260px, 42vw, 580px);
    pointer-events: none;
    z-index: 0;
    mix-blend-mode: darken;
    will-change: transform;
  }

  /* Strikethrough — high contrast version */
  .hero-struck {
    font-family: 'Space Mono', monospace;
    font-size: clamp(0.7rem, 1.3vw, 0.95rem);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--deep);
    text-decoration: line-through;
    text-decoration-color: var(--deep);
    text-decoration-thickness: 2px;
    margin-top: 4rem;
    margin-bottom: 1.5rem;
    line-height: 2;
    max-width: 750px;
  }

  .hero-struck span { display: inline; }
  .hero-struck .dot { margin: 0 0.6rem; text-decoration: none; display: inline-block; }

  .hero h1 {
    font-size: clamp(3rem, 10vw, 8.5rem);
    line-height: 0.88;
    text-transform: uppercase;
    letter-spacing: -0.03em;
    max-width: 950px;
  }

  .w-keep { font-family: 'Oswald', sans-serif; font-weight: 700; display: block; color: var(--deep); }
  .w-different { font-family: 'Playfair Display', serif; font-weight: 900; font-style: italic; display: block; padding-left: 5%; color: var(--purple-vivid); }
  .w-time { font-family: 'Syne', sans-serif; font-weight: 800; display: block; padding-left: 12%; color: var(--deep); }

  .hero-sub {
    font-family: 'Libre Baskerville', serif;
    font-style: italic;
    font-size: clamp(0.95rem, 2vw, 1.2rem);
    max-width: 520px;
    margin-top: 2.5rem;
    line-height: 1.7;
    padding: 1.25rem 1.5rem;
    background: var(--frost);
    border: 1px solid rgba(124,58,237,0.08);
    border-left: 3px solid var(--purple-vivid);
    transform: rotate(-0.5deg);
    color: var(--night);
    position: relative;
    z-index: 1;
  }

  .hero-sub::before {
    content: '';
    position: absolute;
    top: -8px; left: 30px;
    width: 80px; height: 16px;
    background: rgba(168,85,247,0.12);
    transform: rotate(-2deg);
  }

  .scroll-arrow {
    position: absolute;
    bottom: 2rem; right: 3rem;
    font-family: 'VT323', monospace;
    font-size: 1.2rem;
    animation: bounce 1.5s ease-in-out infinite;
    color: var(--purple-bright);
    opacity: 0.5;
  }

  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(8px); }
  }

  /* ========== ARGUMENT ========== */
  .argument {
    padding: 0;
    /* Ethereal deep-space gradient with purple nebula glow */
    background:
      radial-gradient(ellipse at 20% 30%, rgba(124,58,237,0.15) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 70%, rgba(37,99,235,0.12) 0%, transparent 45%),
      radial-gradient(ellipse at 50% 50%, rgba(167,139,250,0.06) 0%, transparent 60%),
      radial-gradient(circle at 70% 20%, rgba(96,165,250,0.08) 0%, transparent 35%),
      linear-gradient(180deg,
        var(--void) 0%,
        #0a0f1e 15%,
        #0e1a30 30%,
        var(--ocean) 50%,
        #0e1a30 70%,
        #0a0f1e 85%,
        var(--void) 100%
      );
    color: var(--frost);
    border-bottom: 2px solid var(--purple-vivid);
    position: relative;
    overflow: hidden;
  }

  /* Floating moon symbols — parallax depth layers */
  .argument::before,
  .argument::after {
    position: absolute;
    font-size: 18rem;
    opacity: 0.06;
    pointer-events: none;
    z-index: 0;
    will-change: transform;
    filter: blur(2px);
  }

  .argument::before {
    content: '☾';
    top: 5%;
    right: -2rem;
    color: var(--purple-bright);
    animation: float-drift-1 18s ease-in-out infinite;
    text-shadow: 0 0 40px rgba(167,139,250,0.15);
  }

  .argument::after {
    content: '○';
    bottom: 8%;
    left: -1rem;
    font-size: 14rem;
    color: var(--blue-bright);
    animation: float-drift-2 22s ease-in-out infinite;
    text-shadow: 0 0 40px rgba(96,165,250,0.12);
  }

  @keyframes float-drift-1 {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-40px) rotate(8deg); }
  }

  @keyframes float-drift-2 {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(30px) rotate(-5deg); }
  }

  /* Star-field shimmer dots */
  .arg-stars {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
  }

  .arg-star {
    position: absolute;
    width: 2px;
    height: 2px;
    background: var(--purple-light);
    border-radius: 50%;
    animation: twinkle 3s ease-in-out infinite;
  }

  /* Bigger bright stars */
  .arg-star.bright {
    width: 3px;
    height: 3px;
    background: #e2e8f0;
    box-shadow: 0 0 4px rgba(226,232,240,0.6), 0 0 8px rgba(167,139,250,0.3);
    animation: twinkle-bright 4s ease-in-out infinite;
  }

  /* Tiny dim stars */
  .arg-star.dim {
    width: 1px;
    height: 1px;
    background: var(--blue-pale);
    animation: twinkle-dim 5s ease-in-out infinite;
  }

  .arg-star:nth-child(1)  { top: 8%; left: 15%; animation-delay: 0s; }
  .arg-star:nth-child(2)  { top: 22%; right: 20%; animation-delay: 0.7s; }
  .arg-star:nth-child(3)  { top: 45%; left: 80%; animation-delay: 1.4s; }
  .arg-star:nth-child(4)  { top: 60%; left: 25%; animation-delay: 0.3s; }
  .arg-star:nth-child(5)  { top: 75%; right: 35%; animation-delay: 2.1s; }
  .arg-star:nth-child(6)  { top: 35%; left: 55%; animation-delay: 1.8s; }
  .arg-star:nth-child(7)  { top: 88%; left: 70%; animation-delay: 0.5s; }
  .arg-star:nth-child(8)  { top: 15%; left: 45%; animation-delay: 2.5s; }
  /* Bright stars */
  .arg-star:nth-child(9)  { top: 5%; left: 65%; animation-delay: 0.2s; }
  .arg-star:nth-child(10) { top: 30%; left: 8%; animation-delay: 1.1s; }
  .arg-star:nth-child(11) { top: 52%; right: 12%; animation-delay: 0.9s; }
  .arg-star:nth-child(12) { top: 82%; left: 40%; animation-delay: 2.3s; }
  /* Dim stars */
  .arg-star:nth-child(13) { top: 12%; left: 30%; animation-delay: 3.2s; }
  .arg-star:nth-child(14) { top: 28%; right: 45%; animation-delay: 1.6s; }
  .arg-star:nth-child(15) { top: 42%; left: 12%; animation-delay: 0.4s; }
  .arg-star:nth-child(16) { top: 55%; right: 55%; animation-delay: 2.8s; }
  .arg-star:nth-child(17) { top: 68%; left: 60%; animation-delay: 1.3s; }
  .arg-star:nth-child(18) { top: 78%; right: 8%; animation-delay: 0.6s; }
  .arg-star:nth-child(19) { top: 92%; left: 20%; animation-delay: 3.5s; }
  .arg-star:nth-child(20) { top: 18%; right: 10%; animation-delay: 2.0s; }
  /* Extra scatter */
  .arg-star:nth-child(21) { top: 3%; left: 85%; animation-delay: 1.7s; }
  .arg-star:nth-child(22) { top: 38%; right: 28%; animation-delay: 0.8s; }
  .arg-star:nth-child(23) { top: 65%; left: 48%; animation-delay: 3.0s; }
  .arg-star:nth-child(24) { top: 95%; right: 25%; animation-delay: 1.2s; }

  @keyframes twinkle {
    0%, 100% { opacity: 0.2; transform: scale(1); }
    50% { opacity: 0.8; transform: scale(2.2); }
  }

  @keyframes twinkle-bright {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.8); }
  }

  @keyframes twinkle-dim {
    0%, 100% { opacity: 0.1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(1.5); }
  }

  /* Nebula clouds */
  .arg-nebula {
    position: absolute;
    border-radius: 50%;
    pointer-events: none;
    z-index: 0;
    filter: blur(60px);
    animation: nebula-pulse 12s ease-in-out infinite;
  }

  .arg-nebula:nth-child(1) {
    width: 300px; height: 200px;
    top: 10%; left: 5%;
    background: radial-gradient(ellipse, rgba(124,58,237,0.08) 0%, transparent 70%);
    animation-delay: 0s;
  }

  .arg-nebula:nth-child(2) {
    width: 250px; height: 250px;
    top: 40%; right: 5%;
    background: radial-gradient(ellipse, rgba(37,99,235,0.07) 0%, transparent 70%);
    animation-delay: 4s;
  }

  .arg-nebula:nth-child(3) {
    width: 350px; height: 180px;
    bottom: 15%; left: 30%;
    background: radial-gradient(ellipse, rgba(167,139,250,0.06) 0%, transparent 70%);
    animation-delay: 8s;
  }

  @keyframes nebula-pulse {
    0%, 100% { opacity: 0.6; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.15); }
  }

  .arg-panel {
    padding: 4rem 3rem 4rem 4rem;
    border-bottom: 1px solid rgba(167,139,250,0.06);
    position: relative;
    cursor: pointer;
    overflow: hidden;
    transition: background 0.3s ease;
    z-index: 1;
  }

  .arg-panel:hover { background: rgba(255,255,255,0.03); }
  .arg-panel:last-child { border-bottom: none; }

  .arg-panel:focus-visible {
    outline: 3px solid var(--purple-bright);
    outline-offset: -3px;
  }

  .arg-num {
    font-family: 'VT323', monospace;
    font-size: 5rem;
    line-height: 1;
    position: absolute;
    right: 3rem; top: 2rem;
    opacity: 0.12;
    /* purple-blue gradient text */
    background: linear-gradient(135deg, var(--purple-bright), var(--blue-bright));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    transition: transform 0.1s linear;
    will-change: transform;
  }

  .arg-headline {
    font-size: clamp(1.4rem, 3.5vw, 2.4rem);
    line-height: 1.15;
    max-width: 700px;
    transition: margin-bottom 0.4s ease, transform 0.6s ease, opacity 0.6s ease;
  }

  /* Parallax slide-in for headlines */
  .arg-headline.parallax-ready {
    opacity: 0;
    transform: translateX(-30px);
  }

  .arg-headline.parallax-visible {
    opacity: 1;
    transform: translateX(0);
  }

  .arg-headline .font-a { font-family: 'Oswald', sans-serif; font-weight: 700; text-transform: uppercase; }
  .arg-headline .font-b { font-family: 'Playfair Display', serif; font-style: italic; }
  .arg-headline .font-c { font-family: 'Syne', sans-serif; font-weight: 800; }
  .arg-headline .font-d { font-family: 'DM Serif Display', serif; }
  .arg-headline .font-e { font-family: 'Courier Prime', monospace; }

  /* ACCESSIBLE accent colors — all pass 4.5:1 on dark backgrounds */
  .arg-headline .purple { color: #c4b5fd; } /* purple-300: ~8.5:1 on void */
  .arg-headline .blue-accent { color: #93c5fd; } /* blue-300: ~8.1:1 on void */
  .arg-headline .struck { text-decoration: line-through; text-decoration-thickness: 2px; opacity: 0.5; }

  .arg-body {
    font-family: 'Libre Baskerville', serif;
    font-size: 0.9rem;
    line-height: 1.85;
    opacity: 0;
    max-height: 0;
    overflow: hidden;
    transition: all 0.5s ease;
    max-width: 600px;
    color: #e2e8f0; /* ice: ~13:1 on void */
  }

  .arg-panel[aria-expanded="true"] .arg-body {
    opacity: 1;
    max-height: 300px;
    margin-top: 1.5rem;
  }

  .arg-toggle {
    position: absolute;
    right: 3rem; bottom: 2rem;
    font-family: 'VT323', monospace;
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    opacity: 0.7;
    transition: all 0.2s;
    color: #e2e8f0;
    border: 1px solid rgba(226,232,240,0.3);
    padding: 0.25rem 0.6rem;
  }

  .arg-panel:hover .arg-toggle {
    opacity: 1;
    color: #f1f5f9;
    border-color: var(--purple-bright);
    background: rgba(124,58,237,0.2);
  }

  .arg-body em {
    font-style: normal;
    color: #c4b5fd; /* purple-300 */
    background: rgba(124,58,237,0.12);
    padding: 0 0.2em;
  }

  /* ========== CALENDAR ========== */
  .calendar-section {
    padding: 5rem 3rem 5rem 4rem;
    border-bottom: 1px solid var(--ice);
    background:
      radial-gradient(ellipse at 30% 0%, rgba(37,99,235,0.03) 0%, transparent 40%),
      radial-gradient(ellipse at 70% 100%, rgba(124,58,237,0.03) 0%, transparent 40%),
      var(--cold-white);
  }

  .cal-section-title {
    font-family: 'VT323', monospace;
    font-size: 0.95rem;
    text-transform: uppercase;
    letter-spacing: 0.4em;
    color: #334155;
    margin-bottom: 4rem;
  }

  .tier { margin-bottom: 5rem; }

  .tier-head {
    display: flex;
    align-items: baseline;
    gap: 1rem;
    margin-bottom: 0.5rem;
    flex-wrap: wrap;
  }

  .tier-name {
    font-family: 'Syne', sans-serif;
    font-weight: 800;
    font-size: clamp(1.8rem, 4vw, 3rem);
    text-transform: uppercase;
    color: var(--deep);
  }

  .tier-note {
    font-family: 'Courier Prime', monospace;
    font-style: italic;
    font-size: 0.75rem;
    color: #334155; /* slate-700: ~8:1 on white */
  }

  .tier-line {
    border: none;
    border-top: 2px dashed var(--purple-vivid);
    opacity: 0.2;
    margin-bottom: 2rem;
  }

  /* FEAST CARDS */
  .feast-collage {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
  }

  @media (max-width: 900px) { .feast-collage { grid-template-columns: repeat(2, 1fr); } }
  @media (max-width: 500px) { .feast-collage { grid-template-columns: 1fr; } }

  .feast-card {
    border: 2px solid var(--deep);
    padding: 1.5rem 1.25rem;
    position: relative;
    background: var(--cold-white);
    transition: all 0.2s ease;
  }

  .feast-card:nth-child(1) { transform: rotate(-1deg); }
  .feast-card:nth-child(2) { transform: rotate(0.5deg); margin-top: 1rem; }
  .feast-card:nth-child(3) { transform: rotate(-0.3deg); }
  .feast-card:nth-child(4) { transform: rotate(0.8deg); margin-top: 0.5rem; }

  .feast-card:hover {
    transform: translate(-2px, -2px) rotate(0deg) !important;
    box-shadow: 4px 4px 0 var(--purple-vivid);
    border-color: var(--purple-vivid);
    z-index: 2;
  }

  .feast-card:focus-within {
    box-shadow: 4px 4px 0 var(--purple-vivid);
    border-color: var(--purple-vivid);
  }

  .feast-card:nth-child(1)::before,
  .feast-card:nth-child(3)::before {
    content: '';
    position: absolute;
    top: -6px; right: 15px;
    width: 60px; height: 14px;
    background: rgba(168,85,247,0.12);
    transform: rotate(3deg);
  }

  .feast-card:nth-child(2)::after {
    content: '';
    position: absolute;
    bottom: -5px; left: 20px;
    width: 70px; height: 14px;
    background: rgba(37,99,235,0.1);
    transform: rotate(-1deg);
  }

  .feast-season {
    font-family: 'VT323', monospace;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: #6d28d9; /* purple-700: 5.4:1 on white */
    margin-bottom: 0.15rem;
  }

  .feast-date {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.75rem;
    color: #334155; /* slate-700 */
    margin-bottom: 0.5rem;
    letter-spacing: 0.05em;
  }

  .moon-card .feast-date {
    color: #93c5fd;
    font-size: 0.7rem;
  }

  .feast-name {
    font-size: 1.15rem;
    margin-bottom: 0.75rem;
    line-height: 1.2;
    color: var(--deep); /* ~18:1 on white */
  }

  .feast-card:nth-child(1) .feast-name { font-family: 'Playfair Display', serif; font-weight: 900; font-style: italic; }
  .feast-card:nth-child(2) .feast-name { font-family: 'Oswald', sans-serif; font-weight: 700; text-transform: uppercase; }
  .feast-card:nth-child(3) .feast-name { font-family: 'DM Serif Display', serif; }
  .feast-card:nth-child(4) .feast-name { font-family: 'Syne', sans-serif; font-weight: 800; text-transform: uppercase; }

  .feast-desc {
    font-family: 'Libre Baskerville', serif;
    font-size: 0.78rem;
    line-height: 1.65;
    font-style: italic;
    color: #334155; /* slate-700: ~8:1 on white */
  }

  /* LUNAR SCROLL */
  .lunar-scroll-wrapper {
    overflow-x: auto;
    overflow-y: visible;
    margin: 0 -3rem 0 -1rem;
    padding: 1rem 3rem 2rem 1rem;
    scrollbar-width: thin;
    scrollbar-color: var(--purple-vivid) transparent;
    cursor: grab;
  }

  .lunar-scroll-wrapper:active { cursor: grabbing; }
  .lunar-scroll-wrapper::-webkit-scrollbar { height: 6px; }
  .lunar-scroll-wrapper::-webkit-scrollbar-track { background: transparent; }
  .lunar-scroll-wrapper::-webkit-scrollbar-thumb { background: var(--purple-vivid); border-radius: 3px; }

  .lunar-scroll-hint {
    font-family: 'VT323', monospace;
    font-size: 0.75rem;
    color: #334155; /* slate-700 */
    margin-bottom: 1rem;
    letter-spacing: 0.1em;
  }

  .lunar-scroll-track {
    display: flex;
    gap: 1.5rem;
    width: max-content;
    padding-bottom: 0.5rem;
  }

  .moon-card {
    width: 280px;
    min-width: 280px;
    padding: 2rem 1.5rem;
    position: relative;
    flex-shrink: 0;
    transition: all 0.2s ease;
    /* blue-to-black gradient per card */
    background: linear-gradient(160deg, var(--ocean) 0%, var(--deep) 60%, var(--void) 100%);
    color: var(--frost);
    border: 1px solid rgba(96,165,250,0.15);
  }

  .moon-card:nth-child(1) { transform: rotate(0.3deg); }
  .moon-card:nth-child(2) { transform: rotate(-0.5deg); margin-top: 1.5rem; }
  .moon-card:nth-child(3) { transform: rotate(0.2deg); }
  .moon-card:nth-child(4) { transform: rotate(-0.4deg); margin-top: 1rem; }

  .moon-card:hover {
    transform: scale(1.03) rotate(0deg) !important;
    box-shadow: 0 0 20px rgba(37,99,235,0.15), 0 0 0 2px var(--purple-bright);
    z-index: 2;
  }

  .moon-card:focus-within {
    box-shadow: 0 0 20px rgba(37,99,235,0.15), 0 0 0 2px var(--purple-bright);
  }

  .moon-symbol {
    font-size: 3.2rem;
    margin-bottom: 1rem;
    display: block;
    line-height: 1;
    color: var(--purple-light);
    text-shadow:
      0 0 8px rgba(167,139,250,0.5),
      0 0 20px rgba(167,139,250,0.3),
      0 0 40px rgba(124,58,237,0.2);
    animation: moon-glow 3s ease-in-out infinite;
  }

  @keyframes moon-glow {
    0%, 100% {
      text-shadow:
        0 0 8px rgba(167,139,250,0.5),
        0 0 20px rgba(167,139,250,0.3),
        0 0 40px rgba(124,58,237,0.2);
      transform: scale(1);
    }
    50% {
      text-shadow:
        0 0 12px rgba(167,139,250,0.7),
        0 0 30px rgba(167,139,250,0.5),
        0 0 60px rgba(124,58,237,0.3),
        0 0 80px rgba(96,165,250,0.15);
      transform: scale(1.08);
    }
  }

  .moon-card:nth-child(1) .moon-symbol { animation-delay: 0s; }
  .moon-card:nth-child(2) .moon-symbol { animation-delay: 0.75s; }
  .moon-card:nth-child(3) .moon-symbol { animation-delay: 1.5s; }
  .moon-card:nth-child(4) .moon-symbol { animation-delay: 2.25s; }

  .moon-phase-label {
    font-family: 'VT323', monospace;
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: #e2e8f0; /* ice: ~13:1 on void */
    margin-bottom: 0.15rem;
  }

  .moon-card:nth-child(1) .feast-name { font-family: 'Courier Prime', monospace; font-weight: 700; }
  .moon-card:nth-child(2) .feast-name { font-family: 'Playfair Display', serif; font-style: italic; font-weight: 900; }
  .moon-card:nth-child(3) .feast-name { font-family: 'Oswald', sans-serif; font-weight: 700; text-transform: uppercase; }
  .moon-card:nth-child(4) .feast-name { font-family: 'DM Serif Display', serif; }

  .moon-card .feast-name {
    font-size: 1.2rem;
    margin-bottom: 0.75rem;
    color: #f1f5f9; /* frost: ~16:1 on void */
  }

  .moon-card .feast-desc {
    color: #cbd5e1; /* silver: ~11:1 on void */
  }

  .moon-prompt {
    margin-top: 1.25rem;
    padding-top: 1rem;
    border-top: 1px solid rgba(96,165,250,0.12);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.7rem;
    letter-spacing: 0.05em;
    color: #cbd5e1; /* silver: ~11:1 on void */
  }

  .moon-prompt span { color: var(--purple-light); }

  /* BLUE MOON */
  .blue-tier {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0;
    max-width: 700px;
    overflow: hidden;
    border: 2px solid var(--purple-vivid);
  }

  @media (max-width: 600px) { .blue-tier { grid-template-columns: 1fr; } }

  .blue-card { padding: 2rem 1.5rem; }

  .blue-card:first-child {
    background: var(--cold-white);
    color: var(--deep);
    border-right: 2px solid var(--purple-vivid);
  }

  @media (max-width: 600px) {
    .blue-card:first-child { border-right: none; border-bottom: 2px solid var(--purple-vivid); }
  }

  .blue-card:last-child {
    /* blue-to-purple-to-black */
    background: linear-gradient(160deg, var(--blue-deep) 0%, var(--purple-deep) 50%, var(--void) 100%);
    color: var(--frost);
  }

  .blue-badge {
    display: inline-block;
    font-family: 'VT323', monospace;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    padding: 0.2rem 0.6rem;
    margin-bottom: 0.5rem;
    background: var(--purple-vivid);
    color: white;
  }

  .blue-card:first-child .feast-date {
    color: #6d28d9;
    margin-bottom: 0.75rem;
  }

  .blue-card:last-child .feast-date {
    color: #93c5fd;
    margin-bottom: 0.75rem;
  }

  .blue-card:first-child .feast-name {
    font-family: 'Playfair Display', serif;
    font-weight: 900;
    font-size: 1.3rem;
    margin-bottom: 0.75rem;
    color: #5b21b6; /* purple-800: 7.8:1 on white */
  }

  .blue-card:last-child .feast-name {
    font-family: 'Syne', sans-serif;
    font-weight: 800;
    text-transform: uppercase;
    font-size: 1.3rem;
    margin-bottom: 0.75rem;
    color: #ddd6fe; /* purple-200: ~11:1 on void */
  }

  .blue-card:first-child .feast-desc { color: #334155; } /* slate-700: ~8:1 on white */
  .blue-card:last-child .feast-desc { color: #cbd5e1; } /* 11:1 on void */

  .blue-rare {
    font-family: 'Courier Prime', monospace;
    font-size: 0.7rem;
    margin-top: 1rem;
    font-style: italic;
  }

  .blue-card:first-child .blue-rare { color: #334155; /* slate-700 */ }
  .blue-card:last-child .blue-rare { color: #cbd5e1; /* silver */ }


  /* ========== CTA ========== */
  .cta-section {
    /* the big blue-purple-black gradient moment */
    background:
      linear-gradient(135deg,
        var(--void) 0%,
        var(--blue-deep) 25%,
        var(--purple-deep) 55%,
        var(--void) 100%
      );
    color: var(--frost);
    padding: 5rem 3rem 5rem 4rem;
    position: relative;
    overflow: hidden;
  }

  .cta-section::before {
    content: '';
    position: absolute;
    top: -20%; left: 30%;
    width: 500px; height: 500px;
    background: radial-gradient(circle, rgba(37,99,235,0.1) 0%, transparent 55%);
    pointer-events: none;
  }

  .cta-section::after {
    content: '';
    position: absolute;
    bottom: -10%; right: 10%;
    width: 400px; height: 400px;
    background: radial-gradient(circle, rgba(124,58,237,0.08) 0%, transparent 55%);
    pointer-events: none;
  }

  .cta-section h2 {
    font-size: clamp(2rem, 6vw, 4.5rem);
    line-height: 1;
    margin-bottom: 1.5rem;
    position: relative;
    z-index: 1;
  }

  .cta-a { font-family: 'Oswald', sans-serif; font-weight: 700; text-transform: uppercase; display: block; color: #cbd5e1; }
  .cta-b { font-family: 'Playfair Display', serif; font-style: italic; font-weight: 900; color: #c4b5fd; display: block; padding-left: 3%; }
  .cta-c { font-family: 'Syne', sans-serif; font-weight: 800; display: block; padding-left: 7%; color: #f1f5f9; }

  .cta-sub {
    font-family: 'Courier Prime', monospace;
    font-style: italic;
    font-size: 0.85rem;
    max-width: 480px;
    line-height: 1.7;
    margin-bottom: 2.5rem;
    color: #cbd5e1; /* silver: ~11:1 on void */
    position: relative;
    z-index: 1;
  }

  .cta-buttons {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    position: relative;
    z-index: 1;
  }

  .cta-btn {
    display: inline-block;
    padding: 1rem 2rem;
    font-family: 'Space Mono', monospace;
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    text-decoration: none;
    transition: all 0.15s ease;
    cursor: pointer;
    background: none;
    border: 2px solid var(--frost);
    color: var(--frost);
  }

  .cta-btn:hover {
    background: var(--frost);
    color: var(--void);
  }

  .cta-btn:focus-visible {
    outline: 3px solid var(--purple-bright);
    outline-offset: 3px;
  }

  .cta-btn.btn-purple {
    border-color: var(--purple-bright);
    color: var(--purple-light);
    background: rgba(124,58,237,0.15);
  }

  .cta-btn.btn-purple:hover {
    background: var(--purple-vivid);
    color: white;
    border-color: var(--purple-vivid);
    box-shadow: 0 0 25px rgba(124,58,237,0.3);
  }

  .cta-moon-bg {
    position: absolute;
    right: -2rem; bottom: -3rem;
    font-size: 18rem;
    opacity: 0.03;
    line-height: 1;
    pointer-events: none;
    color: var(--blue-bright);
  }

  /* ========== FOOTER ========== */
  footer {
    margin-left: 56px;
    background: var(--void);
    color: var(--silver);
    padding: 1.5rem 3rem 1.5rem 4rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-top: 1px solid var(--night);
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .footer-left {
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: #cbd5e1;
    display: flex;
    flex-wrap: wrap;
    gap: 0.2rem 0;
    align-items: baseline;
  }

  .footer-left span {
    display: inline-block;
    padding: 0 0.4rem;
  }

  .footer-left span:nth-child(1) { font-family: 'Oswald', sans-serif; font-weight: 700; transform: rotate(-1.5deg); }
  .footer-left span:nth-child(2) { font-family: 'Playfair Display', serif; font-style: italic; font-weight: 900; transform: rotate(1deg); }
  .footer-left span:nth-child(3) { font-family: 'Syne', sans-serif; font-weight: 800; transform: rotate(-0.5deg); }
  .footer-left span:nth-child(4) { font-family: 'VT323', monospace; font-size: 1.1rem; transform: rotate(2deg); }
  .footer-left span:nth-child(5) { font-family: 'DM Serif Display', serif; transform: rotate(-1deg); }
  .footer-left span:nth-child(6) { font-family: 'Courier Prime', monospace; font-weight: 700; transform: rotate(1.5deg); }

  .footer-left .dot-sep {
    color: var(--purple-bright);
    font-family: 'Space Mono', monospace;
    padding: 0 0.15rem;
  }

  .footer-right {
    font-family: 'VT323', monospace;
    font-size: 0.85rem;
    color: #7c3aed; /* visible on void */
  }

  /* ========== MOON WIDGET ========== */
  .moon-widget {
    position: fixed;
    bottom: 1.5rem; right: 1.5rem;
    z-index: 100;
    /* blue-to-purple gradient */
    background: linear-gradient(135deg, var(--night) 0%, var(--purple-deep) 100%);
    border: 1px solid rgba(124,58,237,0.3);
    padding: 1rem 1.4rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 3px 3px 0 rgba(0,0,0,0.25), 0 0 15px rgba(37,99,235,0.08);
  }

  .moon-widget:hover {
    transform: translate(-2px, -2px);
    box-shadow: 5px 5px 0 rgba(0,0,0,0.25), 0 0 25px rgba(124,58,237,0.15);
    border-color: var(--purple-bright);
  }

  .moon-widget:focus-visible {
    outline: 3px solid var(--purple-bright);
    outline-offset: 3px;
  }

  .moon-widget-icon { font-size: 2rem; }

  .moon-widget-text {
    color: #e2e8f0;
    font-family: 'VT323', monospace;
    font-size: 1rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    line-height: 1.4;
  }

  .moon-widget-phase {
    color: #c4b5fd;
    display: block;
  }

  .moon-widget-countdown {
    color: #93c5fd;
    display: block;
    font-size: 0.9rem;
    margin-top: 0.15rem;
  }

  .moon-widget-close {
    position: absolute;
    top: 0.4rem;
    right: 0.5rem;
    background: none;
    border: none;
    color: #94a3b8;
    font-size: 1.1rem;
    cursor: pointer;
    padding: 0.2rem;
    line-height: 1;
    transition: color 0.15s;
  }

  .moon-widget-close:hover { color: #f1f5f9; }

  .moon-widget.dismissed {
    transform: translateY(120%);
    opacity: 0;
    pointer-events: none;
    transition: transform 0.4s ease, opacity 0.3s ease;
  }

  /* ========== ANIMATIONS ========== */
  .reveal {
    opacity: 0;
    transform: translateY(25px);
    transition: opacity 0.5s ease, transform 0.5s ease;
  }

  .reveal.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .reveal-stagger-1 { transition-delay: 0.05s; }
  .reveal-stagger-2 { transition-delay: 0.1s; }
  .reveal-stagger-3 { transition-delay: 0.15s; }
  .reveal-stagger-4 { transition-delay: 0.2s; }

  /* ========== DOWNLOAD CEREMONY ========== */
  .dl-overlay {
    position: fixed;
    inset: 0;
    z-index: 10000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.6s ease;
  }

  .dl-overlay.active {
    pointer-events: all;
    opacity: 1;
  }

  .dl-overlay-bg {
    position: absolute;
    inset: 0;
    background: var(--void);
    opacity: 0;
    transition: opacity 0.8s ease;
  }

  .dl-overlay.active .dl-overlay-bg { opacity: 1; }

  .dl-moon {
    font-size: 8rem;
    color: var(--purple-light);
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.3);
    z-index: 1;
    text-shadow:
      0 0 20px rgba(167,139,250,0.5),
      0 0 60px rgba(167,139,250,0.3),
      0 0 100px rgba(124,58,237,0.2);
    transition: all 0.5s ease;
    opacity: 0;
  }

  .dl-overlay.active .dl-moon {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
    transition-delay: 0.6s;
  }

  .dl-phase-label {
    font-family: 'VT323', monospace;
    font-size: 1.2rem;
    color: var(--purple-light);
    text-transform: uppercase;
    letter-spacing: 0.3em;
    position: absolute;
    top: calc(50% + 5rem);
    left: 50%;
    transform: translateX(-50%);
    z-index: 1;
    opacity: 0;
    transition: opacity 0.4s ease;
  }

  .dl-overlay.active .dl-phase-label {
    opacity: 1;
    transition-delay: 0.8s;
  }

  .dl-stars {
    position: absolute;
    inset: 0;
    z-index: 0;
    overflow: hidden;
  }

  .dl-stars span {
    position: absolute;
    width: 2px; height: 2px;
    background: var(--purple-light);
    border-radius: 50%;
    opacity: 0;
    animation: dl-star-in 0.4s ease forwards;
  }

  @keyframes dl-star-in {
    0% { opacity: 0; transform: scale(0); }
    100% { opacity: 0.6; transform: scale(1); }
  }

  /* Instruction screen — tabbed layout */
  .dl-instructions {
    position: relative;
    z-index: 1;
    width: 100%;
    max-width: 520px;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    text-align: center;
    padding: 0 1.5rem;
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.8s ease;
  }

  .dl-instructions.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .dl-instructions h3 {
    font-family: 'Syne', sans-serif;
    font-weight: 800;
    font-size: clamp(1.4rem, 3.5vw, 2.2rem);
    text-transform: uppercase;
    color: var(--frost);
    margin-bottom: 1.2rem;
    flex-shrink: 0;
  }

  .dl-instructions h3 em {
    font-family: 'Playfair Display', serif;
    font-style: italic;
    color: var(--purple-light);
    text-transform: none;
  }

  /* Tab bar */
  .dl-tabs {
    display: flex;
    gap: 0;
    margin-bottom: 1.2rem;
    border-bottom: 1px solid rgba(167,139,250,0.2);
    flex-shrink: 0;
  }

  .dl-tab {
    flex: 1;
    padding: 0.6rem 0.5rem;
    font-family: 'VT323', monospace;
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: #64748b;
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .dl-tab.active {
    color: var(--purple-light);
    border-bottom-color: var(--purple-vivid);
  }

  .dl-tab:hover:not(.active) {
    color: #94a3b8;
  }

  /* Tab panels */
  .dl-tab-content {
    flex: 1;
    overflow-y: auto;
    min-height: 0;
  }

  .dl-tab-panel {
    display: none;
  }

  .dl-tab-panel.active {
    display: block;
  }

  .dl-step-list {
    list-style: none;
    text-align: left;
    margin: 0;
    padding: 0;
  }

  .dl-step-list li {
    font-family: 'Libre Baskerville', serif;
    font-size: 0.85rem;
    line-height: 1.7;
    color: #cbd5e1;
    padding: 0.6rem 0;
    border-bottom: 1px solid rgba(167,139,250,0.08);
    display: flex;
    gap: 0.8rem;
    align-items: flex-start;
  }

  .dl-step-list li:last-child { border-bottom: none; }

  .dl-step-num {
    font-family: 'VT323', monospace;
    font-size: 1.6rem;
    color: var(--purple-vivid);
    line-height: 1;
    min-width: 1.2rem;
  }

  .dl-dates-grid {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 0.5rem 1rem;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.75rem;
    color: #cbd5e1;
    text-align: left;
  }

  .dl-dates-grid .phase-icon { color: var(--purple-light); font-size: 1rem; }

  /* Footer buttons */
  .dl-footer {
    flex-shrink: 0;
    padding-top: 1.2rem;
    display: flex;
    justify-content: center;
  }

  .dl-close-btn {
    display: inline-block;
    padding: 0.7rem 2rem;
    font-family: 'Space Mono', monospace;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    border: 2px solid var(--purple-bright);
    background: rgba(124,58,237,0.15);
    color: var(--purple-light);
    cursor: pointer;
    transition: all 0.15s ease;
  }

  .dl-close-btn:hover {
    background: var(--purple-vivid);
    color: white;
    box-shadow: 0 0 25px rgba(124,58,237,0.3);
  }

  /* ========== MOBILE ========== */
  @media (max-width: 768px) {
    .side-nav { display: none; }
    main { margin-left: 0; }
    footer { margin-left: 0; }
    .hero { overflow: visible; }
    .hero, .argument .arg-panel, .calendar-section, .how-section, .cta-section {
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }
    footer { padding-left: 1.5rem; padding-right: 1.5rem; }
    .arg-num { position: static; font-size: 3rem; margin-bottom: 0.5rem; }
    .arg-toggle { display: none; }
    .arg-body { opacity: 1 !important; max-height: none !important; margin-top: 1rem !important; }
    .moon-widget { bottom: 0.75rem; right: 0.75rem; }
    .hero-stamp {
      position: fixed;
      top: 0.75rem;
      right: 0.75rem;
      font-size: 1.05rem;
      padding: 0.5rem 1rem;
      border-width: 3px;
      z-index: 999;
    }
    .hero-moon-img {
      width: 256px;
      top: 1rem;
      left: 1rem;
      right: auto;
    }
  }

  @media (forced-colors: active) {
    .feast-card, .moon-card, .blue-card, .cta-btn { border: 2px solid CanvasText; }
  }
</style>
</head>
<body>

<a href="#main-content" class="skip-link">Skip to main content</a>

<nav class="side-nav" aria-label="Section navigation">
  <a href="#hero" class="nav-moon" aria-label="Back to top">☾</a>
  <a href="#argument" aria-label="Why keep different time">Manifesto</a>
  <a href="#calendar" aria-label="The calendar">Calendar</a>
  <a href="#download" aria-label="Download the calendar">Download</a>
</nav>

<div class="hero-stamp" aria-hidden="true">Est. First Full Moon You Notice</div>

<main id="main-content">

<section class="hero" id="hero" aria-labelledby="hero-title">
  <div class="hero-bg-text" aria-hidden="true">TIME TIME TIME</div>
  <div class="hero-struck" aria-label="Rejecting: Fiscal Quarters, Black Friday, Performance Reviews, Prime Day, Q4 Targets, Cyber Monday, Year-End Close, Sprint Planning">
    <span>Fiscal Quarters</span><span class="dot" aria-hidden="true">·</span><span>Black Friday</span><span class="dot" aria-hidden="true">·</span><span>Performance Reviews</span><span class="dot" aria-hidden="true">·</span><span>Prime Day</span><span class="dot" aria-hidden="true">·</span><span>Q4 Targets</span><span class="dot" aria-hidden="true">·</span><span>Cyber Monday</span><span class="dot" aria-hidden="true">·</span><span>Year-End Close</span><span class="dot" aria-hidden="true">·</span><span>Sprint Planning</span>
  </div>
  <h1 id="hero-title">
    <span class="w-keep">Keep</span>
    <span class="w-different">Different</span>
    <span class="w-time">Time</span>
  </h1>
  <p class="hero-sub">
    The most radical thing you can do is change what clock you live by. This one runs on the moon. No one can own it, sell it, or take it away from you.
  </p>
  <img src="moon.png" alt="" class="hero-moon-img" aria-hidden="true">
  <div class="scroll-arrow" aria-hidden="true">↓ scroll ↓</div>
</section>

<section class="argument" id="argument" aria-labelledby="arg-heading">
  <div class="arg-stars" aria-hidden="true">
    <span class="arg-star"></span><span class="arg-star"></span>
    <span class="arg-star"></span><span class="arg-star"></span>
    <span class="arg-star"></span><span class="arg-star"></span>
    <span class="arg-star"></span><span class="arg-star"></span>
    <span class="arg-star bright"></span><span class="arg-star bright"></span>
    <span class="arg-star bright"></span><span class="arg-star bright"></span>
    <span class="arg-star dim"></span><span class="arg-star dim"></span>
    <span class="arg-star dim"></span><span class="arg-star dim"></span>
    <span class="arg-star dim"></span><span class="arg-star dim"></span>
    <span class="arg-star dim"></span><span class="arg-star dim"></span>
    <span class="arg-star"></span><span class="arg-star bright"></span>
    <span class="arg-star dim"></span><span class="arg-star"></span>
    <span class="arg-nebula"></span><span class="arg-nebula"></span><span class="arg-nebula"></span>
  </div>
  <h2 id="arg-heading" class="sr-only">Why keep different time</h2>

  <div class="arg-panel" role="button" tabindex="0" aria-expanded="false" onclick="toggleArg(this)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();toggleArg(this)}">
    <div class="arg-num" aria-hidden="true">01</div>
    <div class="arg-headline">
      <span class="font-a">The clock you live by</span> <span class="font-b purple">determines who you serve.</span>
    </div>
    <div class="arg-body" role="region">
      The dominant calendar is an extraction schedule disguised as neutral time. Every recurring rhythm in mainstream life either exists to organize your labor or organize your consumption. When people say time is <em>"moving too fast"</em> — that's not a personal failing. That's the calendar working as designed.
    </div>
    <div class="arg-toggle" aria-hidden="true"><span class="arg-toggle-text">[read]</span></div>
  </div>

  <div class="arg-panel" role="button" tabindex="0" aria-expanded="false" onclick="toggleArg(this)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();toggleArg(this)}">
    <div class="arg-num" aria-hidden="true">02</div>
    <div class="arg-headline">
      <span class="font-d">Celestial time is the</span> <span class="font-c purple">one clock nobody owns.</span>
    </div>
    <div class="arg-body" role="region">
      The moon doesn't have a shareholder. The solstice doesn't have a marketing team. These rhythms predate every empire, every economy, every institution. <em>No one can buy the full moon.</em> No one can move the equinox to maximize Q4 revenue. Choosing celestial time is a quiet, structural act of refusal.
    </div>
    <div class="arg-toggle" aria-hidden="true"><span class="arg-toggle-text">[read]</span></div>
  </div>

  <div class="arg-panel" role="button" tabindex="0" aria-expanded="false" onclick="toggleArg(this)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();toggleArg(this)}">
    <div class="arg-num" aria-hidden="true">03</div>
    <div class="arg-headline">
      <span class="font-b">The system's deepest capture</span> <span class="font-a blue-accent">is temporal.</span>
    </div>
    <div class="arg-body" role="region">
      It doesn't just take your money or your labor — it takes your <em>when</em>. It decides when you rest, when you celebrate, when you grieve. You get the weekend if you're lucky. You get three bereavement days. Taking back the authority to decide when we feast, when we mourn, when we serve, when we seek joy — that's reclaiming the most fundamental organizing principle of human life.
    </div>
    <div class="arg-toggle" aria-hidden="true"><span class="arg-toggle-text">[read]</span></div>
  </div>

  <div class="arg-panel" role="button" tabindex="0" aria-expanded="false" onclick="toggleArg(this)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();toggleArg(this)}">
    <div class="arg-num" aria-hidden="true">04</div>
    <div class="arg-headline">
      <span class="font-c">Chosen family</span> <span class="font-e struck">doesn't have holidays</span> <span class="font-d purple">— until now.</span>
    </div>
    <div class="arg-body" role="region">
      The relationships you chose are more fragile than the ones you inherited — not because they matter less, but because <em>nothing structural holds them together.</em> Biological families have Thanksgiving, Christmas, birthdays. Found family has... brunch? Maybe? A shared calendar gives the family you built the same scaffolding that inherited bonds get by default.
    </div>
    <div class="arg-toggle" aria-hidden="true"><span class="arg-toggle-text">[read]</span></div>
  </div>

</section>

<section class="calendar-section" id="calendar" aria-labelledby="cal-heading">
  <h2 id="cal-heading" class="sr-only">The Calendar</h2>
  <div class="cal-section-title" aria-hidden="true">/// The Calendar ///</div>

  <div class="tier" role="region" aria-label="Solar Feasts">
    <div class="tier-head">
      <h3 class="tier-name">Solar Feasts</h3>
      <span class="tier-note">— four times a year, when the earth turns</span>
    </div>
    <hr class="tier-line" aria-hidden="true">
    <div class="feast-collage" role="list">
      <article class="feast-card reveal reveal-stagger-1" role="listitem" tabindex="0">
        <div class="feast-season">Spring Equinox</div>
        <div class="feast-date" id="date-spring"></div>
        <div class="feast-name">The Feast of Transition</div>
        <div class="feast-desc">To celebrate coming out — in all its forms. Light crosses into dominance. The earth itself is emerging from dormancy.</div>
      </article>
      <article class="feast-card reveal reveal-stagger-2" role="listitem" tabindex="0">
        <div class="feast-season">Summer Solstice</div>
        <div class="feast-date" id="date-summer"></div>
        <div class="feast-name">The Feast of Joy</div>
        <div class="feast-desc">To celebrate living outside the closet and outside the lines. Maximum light, minimum shadow. Be fully, completely seen.</div>
      </article>
      <article class="feast-card reveal reveal-stagger-3" role="listitem" tabindex="0">
        <div class="feast-season">Fall Equinox</div>
        <div class="feast-date" id="date-fall"></div>
        <div class="feast-name">The Feast of the Elders</div>
        <div class="feast-desc">To honor our heritage, our ancestors, and the ones who planted what we're harvesting now. We reap what others sowed.</div>
      </article>
      <article class="feast-card reveal reveal-stagger-4" role="listitem" tabindex="0">
        <div class="feast-season">Winter Solstice</div>
        <div class="feast-date" id="date-winter"></div>
        <div class="feast-name">The Feast of Woes</div>
        <div class="feast-desc">To mock our oppressors and mourn the closet. The longest night holds both grief and subversive laughter.</div>
      </article>
    </div>
  </div>

  <div class="tier" role="region" aria-label="Lunar Sabbaths">
    <div class="tier-head">
      <h3 class="tier-name">Lunar Sabbaths</h3>
      <span class="tier-note">— every month, the moon decides</span>
    </div>
    <hr class="tier-line" aria-hidden="true">
    <div class="lunar-scroll-hint" aria-hidden="true">← drag to scroll →</div>
    <div class="lunar-scroll-wrapper" id="lunarScroll" role="region" aria-label="Lunar sabbath cards, scrollable" tabindex="0">
      <div class="lunar-scroll-track" role="list">
        <article class="moon-card" role="listitem" tabindex="0">
          <span class="moon-symbol" aria-hidden="true">●</span>
          <div class="moon-phase-label">New Moon</div>
          <div class="feast-date" id="date-new-moon"></div>
          <div class="feast-name">Bear Each Other's Burdens</div>
          <div class="feast-desc">Charity work. Service days. Mutual aid in darkness, without audience.</div>
          <div class="moon-prompt"><span>prompt:</span> Who needs help? What can you offer?</div>
        </article>
        <article class="moon-card" role="listitem" tabindex="0">
          <span class="moon-symbol" aria-hidden="true">◑</span>
          <div class="moon-phase-label">First Quarter</div>
          <div class="feast-date" id="date-first-quarter"></div>
          <div class="feast-name">Seek Queer Joy</div>
          <div class="feast-desc">Light building, energy rising. Go find what makes you feel alive.</div>
          <div class="moon-prompt"><span>prompt:</span> What brings you joy? Where will you go looking?</div>
        </article>
        <article class="moon-card" role="listitem" tabindex="0">
          <span class="moon-symbol" aria-hidden="true">○</span>
          <div class="moon-phase-label">Full Moon</div>
          <div class="feast-date" id="date-full-moon"></div>
          <div class="feast-name">Feast & Share Plenty</div>
          <div class="feast-desc">Maximum illumination. Gather. Eat together. Share what you have.</div>
          <div class="moon-prompt"><span>prompt:</span> Where are we meeting? What did you bring?</div>
        </article>
        <article class="moon-card" role="listitem" tabindex="0">
          <span class="moon-symbol" aria-hidden="true">◐</span>
          <div class="moon-phase-label">Last Quarter</div>
          <div class="feast-date" id="date-last-quarter"></div>
          <div class="feast-name">Learn Our History</div>
          <div class="feast-desc">Light turning inward. Study. Read. Listen to the ones who came before.</div>
          <div class="moon-prompt"><span>prompt:</span> What are you learning? Who's teaching you?</div>
        </article>
      </div>
    </div>
  </div>

  <div class="tier" role="region" aria-label="Blue Moon High Sabbaths">
    <div class="tier-head">
      <h3 class="tier-name">Blue Moon High Sabbaths</h3>
      <span class="tier-note">— rare time outside of time</span>
    </div>
    <hr class="tier-line" aria-hidden="true">
    <div class="blue-tier reveal">
      <article class="blue-card" tabindex="0">
        <div class="blue-badge">14 days</div>
        <div class="feast-date" id="date-blue-moon-found"></div>
        <div class="feast-name">The Festival of Found Family</div>
        <div class="feast-desc">A full fortnight to celebrate the family you chose. Not a single dinner — a season of recognition.</div>
        <div class="blue-rare">~every 2.7 years. worth the wait.</div>
      </article>
      <article class="blue-card" tabindex="0">
        <div class="blue-badge">14 days</div>
        <div class="feast-date" id="date-blue-moon-estrange"></div>
        <div class="feast-name">The Festival of Estrangement</div>
        <div class="feast-desc">Equal time for the losses. The families that couldn't or wouldn't hold us. The grief and the gift get the same weight.</div>
        <div class="blue-rare">the shadow companion. same duration, same dignity.</div>
      </article>
    </div>
  </div>
</section>

<section class="cta-section" id="download" aria-labelledby="cta-heading">
  <h2 id="cta-heading">
    <span class="cta-a">Start keeping</span>
    <span class="cta-b">different</span>
    <span class="cta-c">time.</span>
  </h2>
  <p class="cta-sub">A printable calendar. A shared rhythm. An ancient clock that belongs to no one and therefore belongs to you.</p>
  <div class="cta-buttons" role="group" aria-label="Download options">
    <a href="#" class="cta-btn" role="button" id="downloadPdfBtn" onclick="event.preventDefault(); startDownloadCeremony();">Download Calendar (PDF)</a>
    <a href="#" class="cta-btn btn-purple" role="button">Send to a Friend</a>
  </div>
  <div class="cta-moon-bg" aria-hidden="true">☾</div>
</section>


</main>

<footer role="contentinfo">
  <div class="footer-left"><span>No copyright</span><span class="dot-sep">·</span><span>No trademark</span><span class="dot-sep">·</span><span>No ownership</span><span class="dot-sep">·</span><span>Take it</span><span class="dot-sep">·</span><span>Change it</span><span class="dot-sep">·</span><span>Make it yours</span></div>
  <div class="footer-right" aria-hidden="true">☾ keep different time ☾</div>
</footer>

<div class="moon-widget" id="moonWidget" role="status" aria-live="polite" tabindex="0" aria-label="Next calendar event countdown">
  <button class="moon-widget-close" aria-label="Dismiss moon widget" onclick="document.getElementById('moonWidget').classList.add('dismissed');">×</button>
  <span class="moon-widget-icon" id="moonIcon" aria-hidden="true">◑</span>
  <div class="moon-widget-text">
    <span id="moonLabel">Loading...</span>
    <span class="moon-widget-phase" id="moonPhase"></span>
    <span class="moon-widget-countdown" id="moonCountdown"></span>
  </div>
</div>

<!-- Download Ceremony Overlay -->
<div class="dl-overlay" id="dlOverlay" aria-hidden="true" role="dialog" aria-label="Download ceremony">
  <div class="dl-overlay-bg"></div>
  <div class="dl-stars" id="dlStars" aria-hidden="true"></div>
  <div class="dl-moon" id="dlMoon" aria-hidden="true">●</div>
  <div class="dl-phase-label" id="dlPhaseLabel">New Moon</div>
  <div class="dl-instructions" id="dlInstructions">
    <h3>Your calendar is <em>ready</em></h3>
    <div class="dl-tabs" role="tablist">
      <button class="dl-tab active" role="tab" aria-selected="true" data-tab="instructions" id="dlTabInstr">Instructions</button>
      <button class="dl-tab" role="tab" aria-selected="false" data-tab="dates" id="dlTabDates">Upcoming Dates</button>
    </div>
    <div class="dl-tab-content">
      <div class="dl-tab-panel active" id="dlPanelInstr" role="tabpanel">
        <ol class="dl-step-list">
          <li><span class="dl-step-num">1</span><span>Print it. Pin it somewhere you'll see it every day.</span></li>
          <li><span class="dl-step-num">2</span><span>Watch the moon. Each phase is a sabbath — a reason to gather, rest, or act.</span></li>
          <li><span class="dl-step-num">3</span><span>Write what you do. Journal the prompts. Keep a record of keeping time differently.</span></li>
          <li><span class="dl-step-num">4</span><span>Share it. Invite someone into the rhythm. The calendar belongs to everyone.</span></li>
        </ol>
      </div>
      <div class="dl-tab-panel" id="dlPanelDates" role="tabpanel">
        <div class="dl-dates-grid" id="dlDatesGrid"></div>
      </div>
    </div>
    <div class="dl-footer">
      <button class="dl-close-btn" id="dlCloseBtn">← Back to Page</button>
    </div>
  </div>
</div>

<script>
  function toggleArg(el) {
    const expanded = el.getAttribute('aria-expanded') === 'true';
    el.setAttribute('aria-expanded', !expanded);
    const t = el.querySelector('.arg-toggle-text');
    if (t) t.textContent = expanded ? '[read]' : '[close]';
  }

  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (!prefersReducedMotion) {
    const obs = new IntersectionObserver((entries) => {
      entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
    }, { threshold: 0.12 });
    document.querySelectorAll('.reveal').forEach(el => obs.observe(el));
  } else {
    document.querySelectorAll('.reveal').forEach(el => el.classList.add('visible'));
  }

  const sections = document.querySelectorAll('section[id]');
  const navLinks = document.querySelectorAll('.side-nav a');
  const navMoon = document.querySelector('.side-nav .nav-moon');
  const moonPhases = { hero: '☾', argument: '◑', calendar: '○', download: '◐' };
  window.addEventListener('scroll', () => {
    let current = '';
    sections.forEach(s => {
      if (window.scrollY >= s.offsetTop - 200) current = s.getAttribute('id');
    });
    navLinks.forEach(a => {
      a.classList.remove('active');
      a.removeAttribute('aria-current');
      if (a.getAttribute('href') === '#' + current) {
        a.classList.add('active');
        a.setAttribute('aria-current', 'true');
      }
    });
    if (navMoon && moonPhases[current]) {
      navMoon.textContent = moonPhases[current];
      // Some glyphs render smaller — adjust sizes to look consistent
      var ch = moonPhases[current];
      navMoon.style.fontSize = (ch === '○' || ch === '◐') ? '2.1rem' : (ch === '☾') ? '1.8rem' : '1.6rem';
    }
  });

  const ls = document.getElementById('lunarScroll');
  let isDown = false, startX, scrollLeft;
  ls.addEventListener('mousedown', e => { isDown = true; startX = e.pageX - ls.offsetLeft; scrollLeft = ls.scrollLeft; });
  ls.addEventListener('mouseleave', () => isDown = false);
  ls.addEventListener('mouseup', () => isDown = false);
  ls.addEventListener('mousemove', e => {
    if (!isDown) return;
    e.preventDefault();
    ls.scrollLeft = scrollLeft - (e.pageX - ls.offsetLeft - startX) * 1.5;
  });

  ls.addEventListener('keydown', e => {
    if (e.key === 'ArrowRight') { ls.scrollLeft += 150; e.preventDefault(); }
    if (e.key === 'ArrowLeft') { ls.scrollLeft -= 150; e.preventDefault(); }
  });

  // ========== MANIFESTO PARALLAX ==========
  if (!prefersReducedMotion) {
    // Headline slide-in
    const argHeadlines = document.querySelectorAll('.arg-headline');
    argHeadlines.forEach(h => h.classList.add('parallax-ready'));

    const headlineObs = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          e.target.classList.add('parallax-visible');
          headlineObs.unobserve(e.target);
        }
      });
    }, { threshold: 0.2 });
    argHeadlines.forEach(h => headlineObs.observe(h));

    // Number parallax — numbers drift upward slower than scroll
    const argNums = document.querySelectorAll('.arg-num');
    let ticking = false;

    function updateParallax() {
      const scrollY = window.scrollY;
      argNums.forEach(num => {
        const panel = num.closest('.arg-panel');
        const rect = panel.getBoundingClientRect();
        const panelCenter = rect.top + rect.height / 2;
        const viewCenter = window.innerHeight / 2;
        const offset = (panelCenter - viewCenter) * 0.35;
        num.style.transform = 'translateY(' + offset + 'px)';
      });
      ticking = false;
    }

    window.addEventListener('scroll', () => {
      if (!ticking) {
        requestAnimationFrame(updateParallax);
        ticking = true;
      }
    }, { passive: true });
  }

  // ========== HERO MOON ROTATION ON SCROLL ==========
  (function() {
    var moonImg = document.querySelector('.hero-moon-img');
    if (moonImg) {
      var isMobile = window.matchMedia('(max-width: 768px)').matches;
      var moonTick = false;
      window.addEventListener('scroll', function() {
        if (!moonTick) {
          requestAnimationFrame(function() {
            var deg = window.scrollY * 0.35;
            if (isMobile) {
              moonImg.style.transform = 'rotate(' + deg + 'deg)';
            } else {
              moonImg.style.transform = 'translateY(-50%) rotate(' + deg + 'deg)';
            }
            moonTick = false;
          });
          moonTick = true;
        }
      }, { passive: true });
      // Update on resize
      window.addEventListener('resize', function() {
        isMobile = window.matchMedia('(max-width: 768px)').matches;
      });
    }
  })();

  // Lunar synodic month ~29.53059 days
  // Known new moon reference: Jan 6 2000 18:14 UTC
  const SYNODIC = 29.53058867;
  const REF_NEW_MOON = new Date(Date.UTC(2000, 0, 6, 18, 14, 0));

  function getMoonAge(date) {
    const diff = (date.getTime() - REF_NEW_MOON.getTime()) / (1000 * 60 * 60 * 24);
    return ((diff % SYNODIC) + SYNODIC) % SYNODIC;
  }

  function getMoonPhase(date) {
    const age = getMoonAge(date || new Date());
    const phases = [
      { icon: '●', name: 'New Moon', sabbath: 'Bear Each Other\'s Burdens', prompt: 'Who needs help today?', start: 0, end: 1.85 },
      { icon: '◑', name: 'Waxing Crescent', sabbath: 'Seek Queer Joy', prompt: 'What joy are you seeking?', start: 1.85, end: 7.38 },
      { icon: '◑', name: 'First Quarter', sabbath: 'Seek Queer Joy', prompt: 'What joy are you seeking?', start: 7.38, end: 11.07 },
      { icon: '◑', name: 'Waxing Gibbous', sabbath: 'Seek Queer Joy', prompt: 'What joy are you seeking?', start: 11.07, end: 14.77 },
      { icon: '○', name: 'Full Moon', sabbath: 'Feast & Share Plenty', prompt: 'Who are you gathering with?', start: 14.77, end: 16.61 },
      { icon: '◐', name: 'Waning Gibbous', sabbath: 'Learn Our History', prompt: 'What are you learning?', start: 16.61, end: 22.15 },
      { icon: '◐', name: 'Last Quarter', sabbath: 'Learn Our History', prompt: 'What are you learning?', start: 22.15, end: 25.84 },
      { icon: '◐', name: 'Waning Crescent', sabbath: 'Learn Our History', prompt: 'What are you learning?', start: 25.84, end: SYNODIC }
    ];
    return phases.find(p => age >= p.start && age < p.end) || phases[0];
  }

  // Get next key lunar events (new moon, first quarter, full moon, last quarter)
  function getNextKeyPhaseDate(date) {
    const age = getMoonAge(date);
    // Key phase boundaries in days from new moon
    const keyPhases = [
      { day: 0, icon: '●', name: 'New Moon', sabbath: 'Bear Each Other\'s Burdens' },
      { day: SYNODIC * 0.25, icon: '◑', name: 'First Quarter', sabbath: 'Seek Queer Joy' },
      { day: SYNODIC * 0.5, icon: '○', name: 'Full Moon', sabbath: 'Feast & Share Plenty' },
      { day: SYNODIC * 0.75, icon: '◐', name: 'Last Quarter', sabbath: 'Learn Our History' }
    ];
    for (const phase of keyPhases) {
      if (phase.day > age) {
        const daysUntil = phase.day - age;
        const eventDate = new Date(date.getTime() + daysUntil * 24 * 60 * 60 * 1000);
        return { ...phase, daysUntil: Math.ceil(daysUntil), date: eventDate };
      }
    }
    // Next new moon
    const daysUntil = SYNODIC - age;
    const eventDate = new Date(date.getTime() + daysUntil * 24 * 60 * 60 * 1000);
    return { ...keyPhases[0], daysUntil: Math.ceil(daysUntil), date: eventDate };
  }

  // Solar feasts for current and next year
  function getSolarFeasts(year) {
    // Approximate equinox/solstice dates (good enough for a calendar widget)
    return [
      { date: new Date(year, 2, 20), name: 'Spring Equinox', sabbath: 'Feast of Transition', icon: '✦' },
      { date: new Date(year, 5, 21), name: 'Summer Solstice', sabbath: 'Feast of Joy', icon: '✦' },
      { date: new Date(year, 8, 22), name: 'Fall Equinox', sabbath: 'Feast of the Elders', icon: '✦' },
      { date: new Date(year, 11, 21), name: 'Winter Solstice', sabbath: 'Feast of Woes', icon: '✦' }
    ];
  }

  function getNextEvent(date) {
    const now = date || new Date();
    const nextPhase = getNextKeyPhaseDate(now);

    // Check solar feasts this year and next
    const feasts = [...getSolarFeasts(now.getFullYear()), ...getSolarFeasts(now.getFullYear() + 1)];
    const nextFeast = feasts.find(f => f.date > now);

    // Return whichever is sooner
    if (nextFeast && nextFeast.date < nextPhase.date) {
      const daysUntil = Math.ceil((nextFeast.date - now) / (1000 * 60 * 60 * 24));
      return { type: 'solar', daysUntil, ...nextFeast };
    }
    return { type: 'lunar', ...nextPhase };
  }

  const now = new Date();
  const next = getNextEvent(now);

  // Widget shows NEXT upcoming event only
  document.getElementById('moonIcon').textContent = next.icon;
  document.getElementById('moonLabel').textContent = next.name;
  document.getElementById('moonPhase').textContent = next.sabbath;

  const countdownEl = document.getElementById('moonCountdown');
  if (next.daysUntil <= 0) {
    countdownEl.textContent = '→ Today!';
  } else if (next.daysUntil === 1) {
    countdownEl.textContent = '→ Tomorrow!';
  } else {
    countdownEl.textContent = '→ in ' + next.daysUntil + ' days';
  }

  // ========== POPULATE DATES ==========
  const fmtDate = (d) => d.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
  const yr = now.getFullYear();

  // Solar feast dates (current year, or next year if already passed)
  const solarDates = [
    { id: 'date-spring', date: new Date(yr, 2, 20) },
    { id: 'date-summer', date: new Date(yr, 5, 20) },
    { id: 'date-fall', date: new Date(yr, 8, 22) },
    { id: 'date-winter', date: new Date(yr, 11, 21) }
  ];
  solarDates.forEach(s => {
    const d = s.date < now ? new Date(yr + 1, s.date.getMonth(), s.date.getDate()) : s.date;
    const el = document.getElementById(s.id);
    if (el) el.textContent = fmtDate(d);
  });

  // Next occurrence of each key moon phase
  function getNextPhaseDate(targetFraction) {
    const age = getMoonAge(now);
    const targetDay = SYNODIC * targetFraction;
    let daysUntil = targetDay - age;
    if (daysUntil <= 0) daysUntil += SYNODIC;
    return new Date(now.getTime() + daysUntil * 24 * 60 * 60 * 1000);
  }

  const moonDates = [
    { id: 'date-new-moon', fraction: 0 },
    { id: 'date-first-quarter', fraction: 0.25 },
    { id: 'date-full-moon', fraction: 0.5 },
    { id: 'date-last-quarter', fraction: 0.75 }
  ];
  moonDates.forEach(m => {
    const el = document.getElementById(m.id);
    if (el) {
      const d = getNextPhaseDate(m.fraction);
      el.textContent = 'Next: ' + fmtDate(d);
    }
  });

  // ========== BLUE MOON DATES ==========
  // A blue moon is the second full moon in a calendar month.
  // Find the next one by walking forward through full moons.
  function findNextBlueMoon(fromDate) {
    const DAY_MS = 24 * 60 * 60 * 1000;
    // Start from the next full moon
    let age = getMoonAge(fromDate);
    let daysToFull = (SYNODIC * 0.5) - age;
    if (daysToFull <= 0) daysToFull += SYNODIC;
    let fullMoonDate = new Date(fromDate.getTime() + daysToFull * DAY_MS);

    // Walk through full moons for the next 5 years
    for (let i = 0; i < 70; i++) {
      const nextFull = new Date(fullMoonDate.getTime() + SYNODIC * DAY_MS);
      // Same calendar month = blue moon
      if (nextFull.getMonth() === fullMoonDate.getMonth() && nextFull.getFullYear() === fullMoonDate.getFullYear()) {
        return nextFull;
      }
      fullMoonDate = nextFull;
    }
    return null;
  }

  const nextBlueMoon = findNextBlueMoon(now);
  if (nextBlueMoon) {
    const blueFmt = fmtDate(nextBlueMoon);
    const blueEnd = new Date(nextBlueMoon.getTime() + 14 * 24 * 60 * 60 * 1000);
    const blueEndFmt = fmtDate(blueEnd);
    const daysUntilBlue = Math.ceil((nextBlueMoon - now) / (1000 * 60 * 60 * 24));

    const foundEl = document.getElementById('date-blue-moon-found');
    const estrangeEl = document.getElementById('date-blue-moon-estrange');
    if (foundEl) foundEl.textContent = 'Next: ' + blueFmt + ' (' + daysUntilBlue + ' days)';
    if (estrangeEl) estrangeEl.textContent = blueFmt + ' – ' + blueEndFmt;
  }

  // ========== DOWNLOAD CEREMONY ==========
  function startDownloadCeremony() {
    const overlay = document.getElementById('dlOverlay');
    const moon = document.getElementById('dlMoon');
    const label = document.getElementById('dlPhaseLabel');
    const stars = document.getElementById('dlStars');
    const instructions = document.getElementById('dlInstructions');
    const datesGrid = document.getElementById('dlDatesGrid');

    // Reset state
    overlay.setAttribute('aria-hidden', 'false');
    instructions.classList.remove('visible');
    moon.style.opacity = '0';
    moon.style.transform = 'translate(-50%, -50%) scale(0.3)';
    label.style.opacity = '0';
    stars.innerHTML = '';

    // Activate overlay (fade in background)
    overlay.classList.add('active');

    // Spawn stars progressively
    function spawnStar(delay) {
      setTimeout(function() {
        var s = document.createElement('span');
        s.style.left = Math.random() * 100 + '%';
        s.style.top = Math.random() * 100 + '%';
        s.style.width = (1 + Math.random() * 2.5) + 'px';
        s.style.height = s.style.width;
        s.style.animationDelay = (Math.random() * 0.3) + 's';
        stars.appendChild(s);
      }, delay);
    }
    for (var i = 0; i < 60; i++) {
      spawnStar(i * 50);
    }

    // Moon phase cycle sequence
    var phases = [
      { icon: '●', label: 'New Moon', sabbath: 'Bear Each Other\'s Burdens' },
      { icon: '◑', label: 'First Quarter', sabbath: 'Seek Queer Joy' },
      { icon: '○', label: 'Full Moon', sabbath: 'Feast & Share Plenty' },
      { icon: '◐', label: 'Last Quarter', sabbath: 'Learn Our History' },
      { icon: '●', label: 'New Moon', sabbath: 'The cycle begins again' }
    ];

    var phaseDelay = 1200; // ms before first phase
    var phaseDuration = 900; // ms per phase

    phases.forEach(function(phase, idx) {
      setTimeout(function() {
        // Transition: shrink, swap, grow
        moon.style.transition = 'all 0.3s ease';
        moon.style.transform = 'translate(-50%, -50%) scale(0.6)';
        moon.style.opacity = '0.4';

        setTimeout(function() {
          moon.textContent = phase.icon;
          label.textContent = phase.label;
          label.style.opacity = '1';
          moon.style.transition = 'all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)';
          moon.style.transform = 'translate(-50%, -50%) scale(1)';
          moon.style.opacity = '1';

          // Adjust size for consistent visual weight
          if (phase.icon === '○' || phase.icon === '◐') {
            moon.style.fontSize = '9rem';
          } else if (phase.icon === '●') {
            moon.style.fontSize = '7.5rem';
          } else {
            moon.style.fontSize = '8rem';
          }
        }, 300);

      }, phaseDelay + (idx * phaseDuration));
    });

    // After phase cycle completes, transition to instruction screen
    var totalPhaseTime = phaseDelay + (phases.length * phaseDuration) + 600;

    setTimeout(function() {
      // Fade out moon and label
      moon.style.transition = 'all 0.6s ease';
      moon.style.opacity = '0';
      moon.style.transform = 'translate(-50%, -50%) scale(0.3)';
      label.style.transition = 'opacity 0.4s ease';
      label.style.opacity = '0';

      // Populate upcoming dates
      populateDlDates(datesGrid);

      // Show instructions
      setTimeout(function() {
        moon.style.display = 'none';
        label.style.display = 'none';
        instructions.classList.add('visible');
      }, 600);

    }, totalPhaseTime);

    // Trigger PDF download during animation
    setTimeout(function() {
      if (typeof generateCalendarPDF === 'function') {
        generateCalendarPDF();
      }
    }, phaseDelay + 400);
  }

  // Populate upcoming dates in the instruction screen
  function populateDlDates(grid) {
    grid.innerHTML = '';
    var today = new Date();
    var phaseMap = [
      { fraction: 0, icon: '●', name: 'New Moon — Bear Each Other\'s Burdens' },
      { fraction: 0.25, icon: '◑', name: 'First Quarter — Seek Queer Joy' },
      { fraction: 0.5, icon: '○', name: 'Full Moon — Feast & Share Plenty' },
      { fraction: 0.75, icon: '◐', name: 'Last Quarter — Learn Our History' }
    ];

    // Get next 3 full cycles of dates (12 events)
    var events = [];
    for (var cycle = 0; cycle < 3; cycle++) {
      phaseMap.forEach(function(p) {
        var age = getMoonAge(today);
        var targetDay = SYNODIC * p.fraction;
        var daysUntil = targetDay - age + (cycle * SYNODIC);
        if (cycle === 0 && daysUntil <= 0) daysUntil += SYNODIC;
        var evDate = new Date(today.getTime() + daysUntil * 24 * 60 * 60 * 1000);
        events.push({ date: evDate, icon: p.icon, name: p.name });
      });
    }

    // Sort by date and take first 8
    events.sort(function(a, b) { return a.date - b.date; });
    events.slice(0, 8).forEach(function(ev) {
      var iconSpan = document.createElement('span');
      iconSpan.className = 'phase-icon';
      iconSpan.textContent = ev.icon;
      grid.appendChild(iconSpan);

      var textSpan = document.createElement('span');
      textSpan.textContent = ev.date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }) + '  ' + ev.name;
      grid.appendChild(textSpan);
    });
  }

  // Tab switching
  document.querySelectorAll('.dl-tab').forEach(function(tab) {
    tab.addEventListener('click', function() {
      var target = this.getAttribute('data-tab');
      // Update tab buttons
      document.querySelectorAll('.dl-tab').forEach(function(t) {
        t.classList.remove('active');
        t.setAttribute('aria-selected', 'false');
      });
      this.classList.add('active');
      this.setAttribute('aria-selected', 'true');
      // Update panels
      document.querySelectorAll('.dl-tab-panel').forEach(function(p) {
        p.classList.remove('active');
      });
      var panelId = target === 'instructions' ? 'dlPanelInstr' : 'dlPanelDates';
      document.getElementById(panelId).classList.add('active');
    });
  });

  // Close ceremony — back to page
  document.getElementById('dlCloseBtn').addEventListener('click', function() {
    var overlay = document.getElementById('dlOverlay');
    var moon = document.getElementById('dlMoon');
    var labelEl = document.getElementById('dlPhaseLabel');
    var instructions = document.getElementById('dlInstructions');

    overlay.classList.remove('active');
    overlay.setAttribute('aria-hidden', 'true');

    // Reset for next use
    setTimeout(function() {
      instructions.classList.remove('visible');
      moon.style.display = '';
      labelEl.style.display = '';
      moon.style.opacity = '0';
      moon.style.transform = 'translate(-50%, -50%) scale(0.3)';
      moon.style.fontSize = '8rem';
      labelEl.style.opacity = '0';
      document.getElementById('dlStars').innerHTML = '';
      // Reset tabs to instructions
      document.querySelectorAll('.dl-tab').forEach(function(t) { t.classList.remove('active'); t.setAttribute('aria-selected', 'false'); });
      document.getElementById('dlTabInstr').classList.add('active');
      document.getElementById('dlTabInstr').setAttribute('aria-selected', 'true');
      document.querySelectorAll('.dl-tab-panel').forEach(function(p) { p.classList.remove('active'); });
      document.getElementById('dlPanelInstr').classList.add('active');
    }, 700);
  });
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  function generateCalendarPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF({ orientation: 'portrait', unit: 'mm', format: 'letter' });
    const pw = 215.9;
    const margin = 14;
    const usable = pw - margin * 2;

    doc.setDrawColor(0, 0, 0);
    doc.setTextColor(0, 0, 0);

    // ========== TITLE ==========
    doc.setFont('helvetica', 'bold');
    doc.setFontSize(42);
    doc.text('Month', pw / 2, margin + 14, { align: 'center' });

    // ========== CALENDAR GRID ==========
    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    const calTop = margin + 22;
    const cellW = usable / 7;
    const headerH = 9;
    const cellH = 24;

    doc.setLineWidth(0.5);

    // Header row
    for (let c = 0; c < 7; c++) {
      const cx = margin + c * cellW;
      doc.rect(cx, calTop, cellW, headerH);
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(10);
      doc.text(days[c], cx + cellW / 2, calTop + headerH / 2 + 1.5, { align: 'center' });
    }

    // 5 body rows
    const bodyTop = calTop + headerH;
    for (let r = 0; r < 5; r++) {
      for (let c = 0; c < 7; c++) {
        doc.rect(margin + c * cellW, bodyTop + r * cellH, cellW, cellH);
      }
    }

    const calBottom = bodyTop + 5 * cellH;

    // ========== MOON PHASE SECTION ==========
    const moonTop = calBottom + 8;
    const moonLabels = ['Full', 'Waning', 'New', 'Waxing'];
    const moonCellW = usable / 4;
    const moonHeaderH = 16;
    const moonBodyH = 36;

    doc.rect(margin, moonTop, usable, moonHeaderH + moonBodyH);

    for (let i = 0; i < 4; i++) {
      const cx = margin + i * moonCellW;
      doc.rect(cx, moonTop, moonCellW, moonHeaderH);
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(14);
      doc.text(moonLabels[i], cx + moonCellW / 2, moonTop + moonHeaderH / 2 + 2, { align: 'center' });
    }

    for (let i = 0; i < 4; i++) {
      doc.rect(margin + i * moonCellW, moonTop + moonHeaderH, moonCellW, moonBodyH);
    }

    doc.save('keep-different-time-calendar.pdf');
  }
</script>

</body>
</html>
